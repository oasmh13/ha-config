# ➊ Aktualisierungstrigger hinzufügen (damit die Karte bei Alarm sofort reagiert)
triggers_update:
  - input_boolean.garage_alarm_active

# ➋ Zustandsabhängige Styles: nur wenn Alarm aktiv → rot blinken/pulsen
state:
  - operator: template
    value: >
      [[[ return states['input_boolean.garage_alarm_active']?.state === 'on'; ]]]
    styles:
      card:
        - animation: redBlink 0.28s steps(2, start) infinite, redPulse 1.2s ease-in-out infinite
        - border: 2px solid rgba(255, 0, 0, 0.95)
      icon:
        - animation: redBlink 0.28s steps(2, start) infinite
      name:
        - text-shadow: 0 0 8px rgba(255, 0, 0, 0.9)

# ➌ Keyframes einmalig bereitstellen (Design bleibt, nur Effekte im Alarm)
card_mod:
  style: |
    @keyframes redPulse {
      0%   { box-shadow: 0 0 0 0 rgba(255,0,0,.95); }
      50%  { box-shadow: 0 0 18px 6px rgba(255,0,0,.65); }
      100% { box-shadow: 0 0 0 0 rgba(255,0,0,.95); }
    }
    @keyframes redBlink {
      0%,49%  { filter: none; }
      50%,100%{ filter: drop-shadow(0 0 8px rgba(255,0,0,.95)) saturate(1.1); }
    }
